<!DOCTYPE html>
<html>
<head>
    <title>Chart Overflow Debugging</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-container { margin: 20px 0; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .stock-card-test { 
            background: var(--bg-primary, #ffffff);
            border: 2px solid red; /* ê²½ê³„ í‘œì‹œ */
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: 280px; /* ê³ ì • ë„ˆë¹„ */
            height: 300px; /* ê³ ì • ë†’ì´ */
        }
        .stock-chart-test {
            height: 100px;
            position: relative;
            margin-top: 8px;
            flex: 1;
            min-height: 100px;
            overflow: hidden;
            padding: 2px;
            border: 2px solid blue; /* ì°¨íŠ¸ ì˜ì—­ í‘œì‹œ */
            background: #f0f0f0;
        }
        .stock-chart-test canvas {
            width: 100% !important;
            height: 100% !important;
            border: 1px solid green; /* ì‹¤ì œ ìº”ë²„ìŠ¤ í‘œì‹œ */
        }
        .debug-info { background: #ffe6e6; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .overflow-test { background: linear-gradient(45deg, red, orange); height: 120px; width: 120%; margin: 10px; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>ğŸš¨ Chart Overflow Debugging</h1>
    
    <div class="test-container">
        <h2>1. ì»¨í…Œì´ë„ˆ í¬ê¸° í…ŒìŠ¤íŠ¸</h2>
        <div class="debug-info">
            <strong>ì¹´ë“œ í¬ê¸°:</strong> 280px Ã— 300px (ë¹¨ê°„ í…Œë‘ë¦¬)<br>
            <strong>ì°¨íŠ¸ ì˜ì—­:</strong> 100px ë†’ì´ (íŒŒë€ í…Œë‘ë¦¬)<br>
            <strong>ìº”ë²„ìŠ¤:</strong> 100% Ã— 100% (ì´ˆë¡ í…Œë‘ë¦¬)
        </div>
        
        <div class="stock-card-test">
            <div style="margin-bottom: 10px;">
                <strong>AAPL</strong> - $258.52 ğŸ“ˆ -2.31%
            </div>
            <div style="margin-bottom: 10px; font-size: 12px; color: #666;">
                ì˜ˆì¸¡: $252.56 | ì‹ ë¢°ë„: 32.3%
            </div>
            
            <div class="stock-chart-test">
                <canvas id="test-chart"></canvas>
            </div>
            
            <div style="margin-top: 10px; font-size: 11px; color: #999;">
                ì°¨íŠ¸ ì˜ì—­ ë°– í…ìŠ¤íŠ¸ - ì—¬ê¸°ê°€ ë³´ì´ë©´ ì •ìƒ
            </div>
        </div>
    </div>

    <div class="test-container">
        <h2>2. ì˜¤ë²„í”Œë¡œìš° í…ŒìŠ¤íŠ¸</h2>
        <div class="debug-info">
            <strong>ì˜ë„ì  ì˜¤ë²„í”Œë¡œìš°:</strong> 120% ë„ˆë¹„ì˜ ìš”ì†Œ (ë¹¨ê°•-ì˜¤ë Œì§€ ê·¸ë¼ë°ì´ì…˜)
        </div>
        
        <div class="stock-card-test">
            <div>ì˜¤ë²„í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì¹´ë“œ</div>
            <div class="overflow-test">
                ì´ ìš”ì†ŒëŠ” ì¹´ë“œ ë°–ìœ¼ë¡œ ë‚˜ê°€ì•¼ í•˜ì§€ë§Œ hiddenìœ¼ë¡œ ì˜ë ¤ì•¼ í•¨
            </div>
            <div>overflow: hiddenì´ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸</div>
        </div>
    </div>

    <div class="test-container">
        <h2>3. ì‹¤ì œ ì°¨íŠ¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸</h2>
        <div id="chart-info" class="debug-info">
            ì°¨íŠ¸ ìƒì„± ì¤‘...
        </div>
        
        <div class="stock-card-test">
            <div>ì‹¤ì œ Chart.js ë Œë”ë§</div>
            <div class="stock-chart-test">
                <canvas id="real-chart"></canvas>
            </div>
            <div>ì°¨íŠ¸ í•˜ë‹¨ í…ìŠ¤íŠ¸</div>
        </div>
    </div>

    <script>
        // Chart.js í…ŒìŠ¤íŠ¸ ì°¨íŠ¸ ìƒì„±
        const ctx = document.getElementById('test-chart').getContext('2d');
        const realCtx = document.getElementById('real-chart').getContext('2d');
        
        const chartData = {
            labels: ['7ì›”22ì¼', '7ì›”23ì¼', '7ì›”24ì¼', '7ì›”25ì¼', '7ì›”28ì¼'],
            datasets: [{
                label: 'AAPL ì‹¤ì œ',
                data: [260, 259, 258, 259, 258],
                borderColor: '#28a745',
                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                borderWidth: 2,
                pointRadius: 0
            }, {
                label: 'AAPL ì˜ˆì¸¡',
                data: [258, 257, 256, 255, 253],
                borderColor: '#007bff',
                backgroundColor: 'transparent',
                borderWidth: 2,
                borderDash: [5, 5],
                pointRadius: 0
            }]
        };

        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                    labels: {
                        boxWidth: 8,
                        font: { size: 8, weight: 'bold' },
                        padding: 8
                    }
                }
            },
            scales: {
                x: {
                    ticks: {
                        font: { size: 8 },
                        maxTicksLimit: 4
                    },
                    grid: { display: false }
                },
                y: {
                    position: 'right',
                    ticks: {
                        font: { size: 7 },
                        maxTicksLimit: 3,
                        callback: function(value) {
                            return '$' + Math.round(value);
                        }
                    },
                    grid: { display: false }
                }
            }
        };

        // ë‘ ì°¨íŠ¸ ëª¨ë‘ ìƒì„±
        const chart1 = new Chart(ctx, {
            type: 'line',
            data: chartData,
            options: chartOptions
        });

        const chart2 = new Chart(realCtx, {
            type: 'line',
            data: chartData,
            options: chartOptions
        });

        // ì°¨íŠ¸ ì •ë³´ ì—…ë°ì´íŠ¸
        setTimeout(() => {
            const info = document.getElementById('chart-info');
            info.innerHTML = `
                <strong>Chart.js ë²„ì „:</strong> ${Chart.version}<br>
                <strong>ì°¨íŠ¸ ìƒì„±:</strong> ì„±ê³µ<br>
                <strong>ìº”ë²„ìŠ¤ í¬ê¸°:</strong> ${ctx.canvas.width}Ã—${ctx.canvas.height} (ë…¼ë¦¬í”½ì…€)<br>
                <strong>ë Œë”ë§ ëª¨ë“œ:</strong> ${ctx.canvas.style.width} Ã— ${ctx.canvas.style.height}
            `;
        }, 1000);

        // í˜ì´ì§€ ë¡œë“œ í›„ ìš”ì†Œ í¬ê¸° ì •ë³´ ì¶œë ¥
        window.addEventListener('load', () => {
            const card = document.querySelector('.stock-card-test');
            const chart = document.querySelector('.stock-chart-test');
            const canvas = document.querySelector('.stock-chart-test canvas');
            
            console.log('ğŸ“ ìš”ì†Œ í¬ê¸° ì •ë³´:');
            console.log('ì¹´ë“œ:', card.offsetWidth + 'Ã—' + card.offsetHeight);
            console.log('ì°¨íŠ¸ ì˜ì—­:', chart.offsetWidth + 'Ã—' + chart.offsetHeight);
            console.log('ìº”ë²„ìŠ¤:', canvas.offsetWidth + 'Ã—' + canvas.offsetHeight);
            console.log('ìŠ¤í¬ë¡¤ í¬ê¸°:', chart.scrollWidth + 'Ã—' + chart.scrollHeight);
            
            if (chart.scrollWidth > chart.offsetWidth || chart.scrollHeight > chart.offsetHeight) {
                console.warn('âš ï¸ ì°¨íŠ¸ ì˜¤ë²„í”Œë¡œìš° ê°ì§€!');
                document.body.innerHTML += '<div style="position:fixed;top:10px;right:10px;background:red;color:white;padding:10px;border-radius:5px;z-index:1000;">ğŸš¨ ì°¨íŠ¸ ì˜¤ë²„í”Œë¡œìš° ê°ì§€!</div>';
            } else {
                console.log('âœ… ì°¨íŠ¸ í¬ê¸° ì •ìƒ');
                document.body.innerHTML += '<div style="position:fixed;top:10px;right:10px;background:green;color:white;padding:10px;border-radius:5px;z-index:1000;">âœ… ì°¨íŠ¸ í¬ê¸° ì •ìƒ</div>';
            }
        });
    </script>
</body>
</html>