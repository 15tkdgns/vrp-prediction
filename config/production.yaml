# 운영 환경 설정 - default.yaml을 상속받아 운영용 설정 오버라이드

# 운영용 데이터 설정
data:
  # 운영용 디렉토리
  directories:
    raw: "data/prod/raw"
    processed: "data/prod/processed"
    models: "data/prod/models"
    results: "data/prod/results"
    backup: "data/prod/backup"

  # 엄격한 검증
  validation:
    strict_mode: true
    max_missing_ratio: 0.01  # 더 엄격한 결측값 허용
    min_samples: 500
    enable_anomaly_detection: true

  # 백업 설정
  backup:
    enable: true
    frequency: "daily"
    retention_days: 30
    compress: true

# 운영용 모델 설정 (최고 성능)
models:
  default_config:
    random_forest:
      n_estimators: 500     # 더 많은 트리
      max_depth: 20
      min_samples_split: 2
      min_samples_leaf: 1

    gradient_boosting:
      n_estimators: 300
      learning_rate: 0.05   # 더 세밀한 학습
      max_depth: 10

    xgboost:
      n_estimators: 500
      max_depth: 10
      learning_rate: 0.05
      tree_method: "gpu_hist"  # GPU 가속

    lstm:
      hidden_size: 256      # 더 큰 네트워크
      num_layers: 4
      dropout: 0.2
      epochs: 200

# 운영용 훈련 설정
training:
  # 더 정교한 검증
  validation:
    method: "purged_time_series_split"
    n_splits: 10
    test_size: 0.1
    purged_window: 10

  # GPU 최적화
  gpu:
    enable: true
    mixed_precision: true
    device_id: 0

  # 하이퍼파라미터 튜닝
  optimization:
    enable_hyperparameter_tuning: true
    optimization_budget: 100
    early_stopping_patience: 50

# 운영용 로깅 (INFO 레벨, 파일 중심)
logging:
  level: "INFO"
  console_handler:
    enable: false         # 운영시 콘솔 로그 비활성화
  file_handler:
    enable: true
    filename: "logs/prod.log"
    max_bytes: 52428800   # 50MB
    backup_count: 10

  # 에러 로그 별도 관리
  error_handler:
    enable: true
    filename: "logs/error.log"
    level: "ERROR"

# 운영용 성능 설정
system:
  performance:
    multiprocessing: true
    n_jobs: -1            # 모든 CPU 코어 사용
    memory_limit: "16GB"  # 더 큰 메모리 할당

  # 에러 처리
  error_handling:
    retry_attempts: 3
    backoff_factor: 2
    circuit_breaker: true

# 운영용 평가 설정
evaluation:
  # 엄격한 성능 임계값
  performance_thresholds:
    min_accuracy: 0.50
    min_f1_score: 0.45
    max_overfitting_ratio: 0.05
    min_sharpe_ratio: 0.1

  # 실시간 모니터링
  monitoring:
    enable_real_time: true
    alert_thresholds:
      accuracy_drop: 0.05
      prediction_drift: 0.1
    notification_channels:
      - "email"
      - "slack"

# 보안 강화
security:
  # 데이터 보호
  data_protection:
    encrypt_sensitive_data: true
    anonymize_results: true
    audit_logging: true

  # 접근 제어
  access_control:
    enable_authentication: true
    require_api_key: true
    rate_limiting: true

# 운영 모니터링
operations:
  # 헬스 체크
  health_check:
    enable: true
    endpoint: "/health"
    interval_seconds: 30

  # 메트릭 수집
  metrics:
    enable: true
    collection_interval: 60
    retention_days: 90

  # 알림 설정
  alerts:
    enable: true
    channels:
      email:
        recipients: ["admin@company.com"]
      slack:
        webhook_url: "${SLACK_WEBHOOK_URL}"

# 확장성 설정
scalability:
  # 로드 밸런싱
  load_balancing:
    enable: true
    max_workers: 8

  # 캐싱
  caching:
    enable: true
    cache_size: "1GB"
    ttl_seconds: 3600

  # 배치 처리
  batch_processing:
    enable: true
    batch_size: 1000
    max_queue_size: 10000